(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[680],{104:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/drill",function(){return s(1885)}])},4820:function(e,t,s){"use strict";s.d(t,{A:function(){return c}});var n=s(5893),r=s(1664),l=s.n(r),i=s(7294),a=s(4486);function c(e){let{children:t}=e,[s,r]=(0,i.useState)(!1),{currentUser:c,logout:o}=(0,a.t)();return(0,n.jsxs)("div",{className:"min-h-[100svh] flex flex-col bg-bg text-brandText",children:[(0,n.jsxs)("header",{className:"sticky top-0 z-40 border-b border-panel bg-bg/95 backdrop-blur supports-[backdrop-filter]:bg-bg/80 safe-top",children:[(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-14",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-md bg-accent/10 flex items-center justify-center border border-accent/30 text-accent font-bold text-xs",children:"JJ"}),(0,n.jsx)(l(),{href:c?"/home":"/",className:"font-semibold tracking-wide text-sm sm:text-base text-accent hover:opacity-90",children:"JIU-JITSU TRAINING"})]}),(0,n.jsxs)("nav",{className:"hidden md:flex items-center gap-8 text-sm",children:[c&&(0,n.jsx)(l(),{href:"/home",className:"hover:text-accent/80",children:"Home"}),c&&(0,n.jsx)(l(),{href:"/drill",className:"hover:text-accent/80",children:"Drill"}),c&&(0,n.jsx)(l(),{href:"/profile",className:"hover:text-accent/80",children:"Profile"}),c&&(0,n.jsx)("button",{onClick:o,className:"text-xs px-3 py-1 rounded bg-panel border border-accent/30 hover:bg-accent/10 text-accent",children:"Logout"})]}),(0,n.jsx)("button",{"aria-label":"Menu",onClick:()=>r(e=>!e),className:"md:hidden inline-flex items-center justify-center w-9 h-9 rounded bg-panel border border-panel hover:border-accent/40 text-accent",children:"☰"})]})}),s&&(0,n.jsxs)("div",{className:"md:hidden border-t border-panel bg-bg px-4 pb-4 pt-2 space-y-2 text-sm",children:[c&&(0,n.jsx)(l(),{onClick:()=>r(!1),href:"/home",className:"block py-1 hover:text-accent/80",children:"Home"}),c&&(0,n.jsx)(l(),{onClick:()=>r(!1),href:"/drill",className:"block py-1 hover:text-accent/80",children:"Drill"}),c&&(0,n.jsx)(l(),{onClick:()=>r(!1),href:"/profile",className:"block py-1 hover:text-accent/80",children:"Profile"}),c&&(0,n.jsx)("button",{onClick:()=>{o(),r(!1)},className:"block py-1 text-accent hover:opacity-80",children:"Logout"})]})]}),(0,n.jsx)("main",{className:"flex-1",children:t}),(0,n.jsx)("footer",{className:"py-6 text-center text-xs text-neutral-500 border-t border-panel safe-bottom",children:"Local-first prototype."})]})}},4408:function(e,t,s){"use strict";s.d(t,{Y:function(){return a}});var n=s(5893),r=s(1163),l=s(7294),i=s(4486);let a=e=>{let{children:t}=e,s=(0,i.t)(e=>e.currentUser),a=(0,r.useRouter)();return((0,l.useEffect)(()=>{s||a.replace("/")},[s,a]),s)?(0,n.jsx)(n.Fragment,{children:t}):null}},6945:function(e,t,s){"use strict";s.d(t,{H:function(){return a}});var n=s(4529);function r(e,t){let s=e.count+1,n=t-e.mean,r=e.mean+n/s,l=e.m2+n*(t-r);return{mean:r,m2:l,count:s}}class l{startSegment(e){this.rec.segActive={tStart:e,tEnd:e,reps:0,postureIssues:0}}rollSegment(e){if(!this.rec.segActive){this.startSegment(e);return}let t=this.rec.segActive;t.tEnd=e,t.tEnd-t.tStart>=3e4&&(this.rec.segments.push(t),this.startSegment(e))}updateFrame(e){let t=Date.now();if(this.rollSegment(t),this.rec.frameCount++,null!=e.fps&&(this.rec.fpsSum+=e.fps,this.rec.fpsSumSq+=e.fps*e.fps),e.hasPose){if(this.rec.detectionFrames++,null!=e.visibilityAvg&&(this.rec.avgVisibilitySum+=e.visibilityAvg),null!=e.bboxAreaPct&&(this.rec.bboxAreaSumPct+=e.bboxAreaPct,this.rec.bboxAreaSumSqPct+=e.bboxAreaPct*e.bboxAreaPct),null!=e.torsoAngle&&(this.rec.torsoAngleSum+=e.torsoAngle,this.rec.torsoAngleSumSq+=e.torsoAngle*e.torsoAngle),null!=e.shoulderSym&&this.updateSym("shoulderSym",e.shoulderSym),null!=e.kneeSym&&this.updateSym("kneeSym",e.kneeSym),e.jointAngles)for(let[t,s]of Object.entries(e.jointAngles)){if(null==s)continue;let e=this.rec.jointStats[t];if(e){e.min=Math.min(e.min,s),e.max=Math.max(e.max,s);let t=r(e,s);e.mean=t.mean,e.m2=t.m2,e.count=t.count}else e={min:s,max:s,mean:s,m2:0,count:1},this.rec.jointStats[t]=e}e.postureIssue&&(this.rec.postureIssues++,this.rec.segActive&&this.rec.segActive.postureIssues++),e.repIncrement&&e.repMode&&(this.rec.repsByMode[e.repMode]=(this.rec.repsByMode[e.repMode]||0)+1,this.rec.totalReps++,this.rec.firstRepTs||(this.rec.firstRepTs=t),this.rec.currentStreak++,this.rec.maxRepStreak=Math.max(this.rec.maxRepStreak,this.rec.currentStreak),this.rec.segActive&&this.rec.segActive.reps++)}}updateSym(e,t){let s=this.rec[e];s.min=Math.min(s.min,t),s.max=Math.max(s.max,t);let n=r(s,t);s.mean=n.mean,s.m2=n.m2,s.count=n.count}interrupt(){this.rec.interruptions++,this.rec.currentStreak=0}finalize(){let e=Date.now();this.rec.endTs=e,this.rec.durationSec=(e-this.rec.startTs)/1e3,this.rec.segActive&&(this.rec.segActive.tEnd=e,this.rec.segActive.tEnd-this.rec.segActive.tStart>1e3&&this.rec.segments.push(this.rec.segActive));let t=this.rec.detectionFrames/Math.max(1,this.rec.frameCount);this.rec.detectionRate=t,this.rec.avgVisibility=this.rec.detectionFrames?this.rec.avgVisibilitySum/this.rec.detectionFrames:0,this.rec.formConsistencyScore=this.estimateFormScore(),this.rec.focusScore=100*(this.rec.detectionRate||0);let s={};return 10>(this.rec.durationSec||0)&&(s.short=!0),t<.4&&(s.lowQuality=!0),this.rec.qualityFlags=s,this.rec.finalized=!0,this.rec}estimateFormScore(){let e=this.rec.shoulderSym,t=this.rec.kneeSym,s=e.count>1?e.m2/(e.count-1):0,n=t.count>1?t.m2/(t.count-1):0,r=Math.min(1,this.rec.postureIssues/Math.max(10,this.rec.durationSec||1));return Math.round(100*(.4*(1-Math.min(1,(s+n)/400))+.3*(this.rec.detectionRate||0)+.3*(1-r)))}constructor(e,t,s){this.rec={schemaVersion:1,sessionId:crypto.randomUUID(),userId:e,startTs:Date.now(),frameCount:0,modelComplexity:t,mirrorUsed:s,detectionFrames:0,avgVisibilitySum:0,bboxAreaSumPct:0,bboxAreaSumSqPct:0,postureIssues:0,torsoAngleSum:0,torsoAngleSumSq:0,shoulderSym:{min:1/0,max:-1/0,mean:0,m2:0,count:0},kneeSym:{min:1/0,max:-1/0,mean:0,m2:0,count:0},jointStats:{},repsByMode:{},totalReps:0,maxRepStreak:0,currentStreak:0,interruptions:0,errors:[],segments:[],segActive:null,fpsSum:0,fpsSumSq:0}}}let i={totalReps:0,sessions:0,bestSymShoulder:null,bestSymKnee:null,postureIssues:0,lastUpdated:null,startedAt:null},a=(0,n.Ue)((e,t)=>({...i,activeSessionStart:null,sessionRecords:[],activeSessionTracker:null,sessionHistory:[],addSession:t=>e(e=>({...e,sessions:e.sessions+1,startedAt:Date.now(),...t,lastUpdated:Date.now()})),addReps:t=>e(e=>({totalReps:e.totalReps+t,lastUpdated:Date.now()})),addRep:()=>e(e=>({totalReps:e.totalReps+1,lastUpdated:Date.now()})),considerSymmetry:(t,s)=>e(e=>({bestSymShoulder:null!=t?null==e.bestSymShoulder?t:Math.min(e.bestSymShoulder,t):e.bestSymShoulder,bestSymKnee:null!=s?null==e.bestSymKnee?s:Math.min(e.bestSymKnee,s):e.bestSymKnee,lastUpdated:Date.now()})),recordPostureIssue:()=>e(e=>({postureIssues:e.postureIssues+1,lastUpdated:Date.now()})),resetAll:()=>e({...i,activeSessionStart:null,sessionRecords:[]}),startSession:()=>e(e=>e.activeSessionStart?e:{activeSessionStart:Date.now(),startedAt:Date.now()}),finalizeSession:t=>{let{reps:s,postureIssuesDelta:n}=t,r=null;return e(e=>{var t,l;if(!e.activeSessionStart)return e;let i=Date.now();return r={id:(null===(t=(l=crypto).randomUUID)||void 0===t?void 0:t.call(l))||Math.random().toString(36).slice(2),startedAt:e.activeSessionStart,endedAt:i,durationSec:(i-e.activeSessionStart)/1e3,reps:s,postureIssues:n,bestSymShoulder:e.bestSymShoulder,bestSymKnee:e.bestSymKnee},{...e,activeSessionStart:null,sessionRecords:[r,...e.sessionRecords].slice(0,100),sessions:e.sessions+1,lastUpdated:Date.now()}}),r},startSessionTracking:(s,n,r)=>{t().activeSessionTracker||e({activeSessionTracker:new l(s,n,r)})},updateFrameMetrics:e=>{let s=t().activeSessionTracker;s&&s.updateFrame(e)},endSessionTracking:()=>{let s=t().activeSessionTracker;if(!s)return null;let n=s.finalize();return e(e=>({activeSessionTracker:null,sessionHistory:[n,...e.sessionHistory].slice(0,100)})),n},clearSessionHistory:()=>e({sessionHistory:[]})}))},1885:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(5893),r=s(7294),l=s(4820),i=s(4408),a=s(6945),c=s(4486),o=s(1163);let d=()=>Promise.all([s.e(264).then(s.t.bind(s,264,23)),s.e(135).then(s.t.bind(s,7135,23)),s.e(423).then(s.t.bind(s,5423,23))]);function u(){var e,t,u,h,m,x,p,f,b,v,g,S,y,j,w,k,N,R,A,M,T,F,I;let C=(0,r.useRef)(null),E=(0,r.useRef)(null),[P,D]=(0,r.useState)(!1),[L,U]=(0,r.useState)(!0),[H,_]=(0,r.useState)(1),[q,K]=(0,r.useState)("none"),[W,z]=(0,r.useState)("-"),[O,V]=(0,r.useState)(0),[B,J]=(0,r.useState)(0),[G,Y]=(0,r.useState)(!1),[X,Q]=(0,r.useState)({}),[Z,$]=(0,r.useState)(null),[ee,et]=(0,r.useState)(null),[es,en]=(0,r.useState)("—"),[er,el]=(0,r.useState)([]),[ei,ea]=(0,r.useState)(null),ec=(0,r.useRef)(null),eo=(0,r.useRef)(new Set),ed=(0,a.H)(),{currentUser:eu}=(0,c.t)(),eh=(0,o.useRouter)(),em=(0,r.useRef)(0),ex=(0,r.useRef)(!1),ep=(0,r.useRef)(performance.now()),ef=(0,r.useRef)(null),eb=(0,r.useRef)(null),ev=(0,r.useRef)(null),eg=(0,r.useRef)(null),eS=(0,r.useRef)(0),ey=(0,r.useRef)(!1),ej=(e,t,s)=>{if(!e||!t||!s)return;let n=e[0]-t[0],r=e[1]-t[1],l=s[0]-t[0],i=Math.abs((Math.atan2(s[1]-t[1],l)-Math.atan2(r,n))*180/Math.PI);return i>180&&(i=360-i),i},ew=async()=>{if(P)return;let e=C.current;try{ev.current=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1})}catch(e){console.error("camera error",e);return}if(e.srcObject=ev.current,await e.play(),ey.current&&ef.current)try{ef.current.setOptions({modelComplexity:H})}catch(e){}else{let[e,t,s]=await d(),{Pose:n,POSE_CONNECTIONS:r}=e,{Camera:l}=t,{drawConnectors:i,drawLandmarks:a}=s;eg.current={drawConnectors:i,drawLandmarks:a,POSE_CONNECTIONS:r};let c=new n({locateFile:e=>"https://cdn.jsdelivr.net/npm/@mediapipe/pose/".concat(e)});c.setOptions({modelComplexity:H,smoothLandmarks:!0,enableSegmentation:!1,minDetectionConfidence:.5,minTrackingConfidence:.5}),c.onResults(eN),ef.current=c,ey.current=!0}let{Camera:t}=await s.e(135).then(s.t.bind(s,7135,23)),n=new t(e,{onFrame:async()=>{ef.current&&await ef.current.send({image:e})},width:e.videoWidth,height:e.videoHeight});eb.current=n,n.start(),D(!0),ex.current||(ed.startSession(),eu&&ed.startSessionTracking(eu.email,H,L),em.current=ed.postureIssues,ex.current=!0,V(0),z("-"))},ek=function(){var e,t,s,n;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null===(e=eb.current)||void 0===e||e.stop(),eb.current=null,r){try{null===(n=ef.current)||void 0===n||null===(s=n.close)||void 0===s||s.call(n)}catch(e){}ef.current=null,ey.current=!1}if(null===(t=ev.current)||void 0===t||t.getTracks().forEach(e=>e.stop()),ev.current=null,D(!1),r&&ex.current){let e=ed.postureIssues-em.current,t=ed.finalizeSession({reps:O,postureIssuesDelta:e});ed.endSessionTracking(),ex.current=!1,eo.current.clear(),ec.current&&(window.clearTimeout(ec.current),ec.current=null),ea(null),t&&eh.push("/profile?justSaved=".concat(encodeURIComponent(t.id)))}},eN=e=>{let t;let s=E.current,n=C.current;if(!s||!n)return;let r=s.getContext("2d");if(!r)return;s.width=n.videoWidth,s.height=n.videoHeight,r.save(),r.clearRect(0,0,s.width,s.height),L&&(r.translate(s.width,0),r.scale(-1,1));try{r.drawImage(n,0,0,s.width,s.height)}catch(e){r.restore();return}let l=e.poseLandmarks,i=!!l;if(Y(i),!l){r.restore();return}if(eg.current){let{drawConnectors:e,drawLandmarks:t,POSE_CONNECTIONS:s}=eg.current;e(r,l,s,{color:"#58A6FF",lineWidth:3}),t(r,l,{color:"#F0F6FC",lineWidth:1,radius:2})}let a={leftShoulder:11,rightShoulder:12,leftElbow:13,rightElbow:14,leftWrist:15,rightWrist:16,leftHip:23,rightHip:24,leftKnee:25,rightKnee:26,leftAnkle:27,rightAnkle:28},c=e=>e?[e.x,e.y]:void 0,o=c(l[a.leftShoulder]),d=c(l[a.rightShoulder]),u=c(l[a.leftElbow]),h=c(l[a.rightElbow]),m=c(l[a.leftWrist]),x=c(l[a.rightWrist]),p=c(l[a.leftHip]),f=c(l[a.rightHip]),b=c(l[a.leftKnee]),v=c(l[a.rightKnee]),g=c(l[a.leftAnkle]),S=c(l[a.rightAnkle]),y=ej(o,u,m),j=ej(d,h,x),w=ej(p,b,g),k=ej(f,v,S),N=ej(u,o,p),R=ej(h,d,f),A=ej(o,p,b),M=ej(d,f,v),T=o&&d?[(o[0]+d[0])/2,(o[1]+d[1])/2]:void 0,F=p&&f?[(p[0]+f[0])/2,(p[1]+f[1])/2]:void 0;if(T&&F){let e=T[0]-F[0];t=Math.abs(180*Math.atan2(T[1]-F[1],e)/Math.PI)}let I=l.map(e=>"number"==typeof e.visibility?e.visibility:0).filter(e=>e>=0),P=I.length?I.reduce((e,t)=>e+t,0)/I.length:null;et(P);let D=l.map(e=>e.x),U=l.map(e=>e.y),H=Math.max(0,Math.min(1,Math.max(...D)-Math.min(...D))),_=Math.max(0,Math.min(1,Math.max(...U)-Math.min(...U)));$([H,_]);let K="neutral";null!=t&&((t>120||t<60)&&(K="leaning"),null!=P&&P<.5&&(K+=", occluded")),en(K);let O=null!=N&&null!=R?Math.abs(N-R):void 0,G=null!=w&&null!=k?Math.abs(w-k):void 0;if(Q({elbowL:y,elbowR:j,kneeL:w,kneeR:k,shoulderL:N,shoulderR:R,hipL:A,hipR:M,torso:t,symShoulder:O,symKnee:G}),ed.considerSymmetry(null!=O?O:null,null!=G?G:null),K.includes("leaning")){let e=Date.now();e-eS.current>1e3&&(ed.recordPostureIssue(),eS.current=e)}let X=(e,t)=>{z(e),t&&(V(e=>(ed.addReps(1),e+1)),ed.updateFrameMetrics({hasPose:!0,repMode:"none"!==q?q:void 0,repIncrement:!0}))},Z=e=>{null!=e&&(e>160&&X("down",!1),e<40&&"down"===W&&X("up",!0))};switch(q){case"curlL":Z(y);break;case"curlR":Z(j);break;case"squat":var ee;null!=(ee=null!=w&&null!=k?Math.min(w,k):null!=w?w:k)&&(ee>160&&X("up",!1),ee<100&&"up"===W&&X("down",!0));break;case"pushup":((e,t)=>{let s=null!=e&&null!=t?(e+t)/2:null!=e?e:t;null!=s&&(s>160&&X("up",!1),s<80&&"up"===W&&X("down",!0))})(y,j);break;case"jack":((e,t,s,n)=>{var r,l;if(!e||!t||!s||!n)return;let i=e[1]<(null!==(r=null==o?void 0:o[1])&&void 0!==r?r:.5)&&t[1]<(null!==(l=null==d?void 0:d[1])&&void 0!==l?l:.5),a=Math.abs(s[0]-n[0])>.3;i&&a?"open"!==W&&X("open",!1):"open"===W&&X("closed",!0)})(m,x,g,S)}let es=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff";if(!e||null==t)return;let l=(L?1-e[0]:e[0])*s.width,i=e[1]*s.height;r.fillStyle=n,r.font="12px sans-serif",r.fillText(String(Math.round(t)),l+6,i-6)},er="#58A6FF";es(u,y,er),es(h,j,er),es(b,w,er),es(v,k,er),r.restore(),ed.updateFrameMetrics({hasPose:i,visibilityAvg:null!=P?P:void 0,bboxAreaPct:H&&_?H*_:void 0,torsoAngle:t,shoulderSym:O,kneeSym:G,jointAngles:{elbowL:y,elbowR:j,kneeL:w,kneeR:k,shoulderL:N,shoulderR:R,hipL:A,hipR:M,torso:t},fps:B,postureIssue:K.includes("leaning"),repMode:"none"!==q?q:void 0,repIncrement:!1});let el=performance.now(),ei=el-ep.current;ep.current=el,J(ei>0?1e3/ei:0)};(0,r.useEffect)(()=>()=>{ek()},[]),(0,r.useEffect)(()=>{ef.current&&ef.current.setOptions({modelComplexity:H})},[H]);let eR=e=>{eo.current.has(e)||(eo.current.add(e),ea(e),ec.current&&window.clearTimeout(ec.current),ec.current=window.setTimeout(()=>{ea(null)},6e3))};(0,r.useEffect)(()=>{if(P&&5===O)switch(q){case"curlL":case"curlR":eR("Slow eccentric curls now");break;case"squat":eR("Try a jump squat progression");break;case"pushup":eR("Add a shoulder tap variation");break;case"jack":eR("Increase tempo slightly")}},[O,q,P]),(0,r.useEffect)(()=>{P&&"none"===q&&G&&"neutral"===es&&!ei&&eR("Try back take from here")},[q,G,es,P,ei]),(0,r.useEffect)(()=>()=>{ec.current&&window.clearTimeout(ec.current)},[]);let eA=es.includes("leaning")?"Posture adjustment needed":G?"Good alignment":"No pose detected";return(0,n.jsx)(i.Y,{children:(0,n.jsx)(l.A,{children:(0,n.jsx)("main",{className:"container-mobile flex flex-col items-center bg-bg text-brandText min-h-[calc(100svh-120px)] py-6",children:(0,n.jsxs)("div",{className:"w-full max-w-4xl flex flex-col items-center",children:[(0,n.jsxs)("div",{className:"relative w-full aspect-video bg-panel rounded-xl overflow-hidden border border-accent/30",children:[(0,n.jsx)("video",{ref:C,playsInline:!0,className:"w-full h-full object-cover hidden"}),(0,n.jsx)("canvas",{ref:E,className:"absolute inset-0 w-full h-full"}),ei&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:(0,n.jsx)("div",{className:"bg-black/60 px-8 py-6 rounded-2xl border border-accent/40 shadow-2xl max-w-[80%]",children:(0,n.jsx)("p",{className:"text-3xl md:text-5xl font-bold tracking-wide text-white text-center drop-shadow-[0_2px_6px_rgba(0,0,0,0.6)] leading-tight",children:ei})})}),!P&&(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4 bg-bg/80",children:[(0,n.jsx)("button",{onClick:ew,className:"btn-accent px-6 py-3 rounded-2xl font-medium",children:"Enable Camera"}),(0,n.jsx)("p",{className:"text-xs text-brandText/60",children:"Camera permission required to begin."})]})]}),(0,n.jsxs)("div",{className:"mt-6 text-center",children:[(0,n.jsx)("p",{className:"text-brandText/60 text-base md:text-lg",children:"You're in"}),(0,n.jsx)("h2",{className:"text-2xl md:text-3xl font-bold tracking-wide text-accent",children:G?"ACTIVE":"IDLE"}),(0,n.jsx)("p",{className:"font-medium mt-2 text-sm md:text-base ".concat(eA.includes("adjust")?"text-yellow-400":eA.includes("Good")?"text-accent":"text-brandText/50"),children:eA})]}),(0,n.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 w-full sm:w-auto justify-center",children:[(0,n.jsx)("button",{onClick:()=>P?ek():ew(),className:"btn-accent w-full sm:w-auto px-6 py-3 rounded-2xl text-base min-w-[140px]",children:P?"Pause":"Resume"}),(0,n.jsx)("button",{onClick:()=>ek(!0),disabled:!ex.current,className:"w-full sm:w-auto px-6 py-3 rounded-2xl bg-red-600 hover:bg-red-500 disabled:opacity-40 text-base min-w-[140px]",children:"End Session"})]}),(0,n.jsxs)("div",{className:"mt-10 w-full max-w-4xl grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,n.jsxs)("div",{className:"bg-panel rounded-lg p-4 border border-accent/20",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold mb-3 tracking-wide text-brandText/70",children:"Controls"}),(0,n.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,n.jsxs)("label",{className:"flex items-center justify-between gap-4",children:["Mirror",(0,n.jsx)("input",{type:"checkbox",className:"accent-accent",checked:L,onChange:e=>U(e.target.checked)})]}),(0,n.jsxs)("label",{className:"flex items-center justify-between gap-4",children:["Model",(0,n.jsxs)("select",{value:H,onChange:e=>_(Number(e.target.value)),className:"bg-panel/60 rounded px-2 py-1 border border-accent/30 focus:outline-none focus:ring-1 focus:ring-accent/60",children:[(0,n.jsx)("option",{value:0,children:"Lite"}),(0,n.jsx)("option",{value:1,children:"Full"}),(0,n.jsx)("option",{value:2,children:"Heavy"})]})]}),(0,n.jsxs)("label",{className:"flex items-center justify-between gap-4",children:["Mode",(0,n.jsxs)("select",{value:q,onChange:e=>{K(e.target.value),z("-"),V(0)},className:"bg-panel/60 rounded px-2 py-1 border border-accent/30 focus:outline-none focus:ring-1 focus:ring-accent/60 w-32",children:[(0,n.jsx)("option",{value:"none",children:"None"}),(0,n.jsx)("option",{value:"curlL",children:"Curl L"}),(0,n.jsx)("option",{value:"curlR",children:"Curl R"}),(0,n.jsx)("option",{value:"squat",children:"Squat"}),(0,n.jsx)("option",{value:"pushup",children:"Push-up"}),(0,n.jsx)("option",{value:"jack",children:"Jack"})]})]}),(0,n.jsxs)("div",{className:"pt-2 grid grid-cols-2 gap-2 text-[11px] text-brandText/60",children:[(0,n.jsxs)("span",{children:["FPS: ",B.toFixed(1)]}),(0,n.jsxs)("span",{children:["Detected: ",G?"yes":"no"]}),(0,n.jsxs)("span",{children:["Reps: ",O]}),(0,n.jsxs)("span",{children:["Stage: ",W]})]})]})]}),(0,n.jsxs)("div",{className:"bg-panel rounded-lg p-4 border border-accent/20 md:col-span-2",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold mb-3 tracking-wide text-brandText/70",children:"Metrics"}),(0,n.jsxs)("ul",{className:"text-[11px] grid grid-cols-2 md:grid-cols-3 gap-y-1 gap-x-3 leading-relaxed text-brandText/70",children:[(0,n.jsxs)("li",{children:["Elbow L/R: ",null!==(S=null===(e=X.elbowL)||void 0===e?void 0:e.toFixed(0))&&void 0!==S?S:"—"," / ",null!==(y=null===(t=X.elbowR)||void 0===t?void 0:t.toFixed(0))&&void 0!==y?y:"—"]}),(0,n.jsxs)("li",{children:["Knee L/R: ",null!==(j=null===(u=X.kneeL)||void 0===u?void 0:u.toFixed(0))&&void 0!==j?j:"—"," / ",null!==(w=null===(h=X.kneeR)||void 0===h?void 0:h.toFixed(0))&&void 0!==w?w:"—"]}),(0,n.jsxs)("li",{children:["Shoulder L/R: ",null!==(k=null===(m=X.shoulderL)||void 0===m?void 0:m.toFixed(0))&&void 0!==k?k:"—"," / ",null!==(N=null===(x=X.shoulderR)||void 0===x?void 0:x.toFixed(0))&&void 0!==N?N:"—"]}),(0,n.jsxs)("li",{children:["Hip L/R: ",null!==(R=null===(p=X.hipL)||void 0===p?void 0:p.toFixed(0))&&void 0!==R?R:"—"," / ",null!==(A=null===(f=X.hipR)||void 0===f?void 0:f.toFixed(0))&&void 0!==A?A:"—"]}),(0,n.jsxs)("li",{children:["Torso: ",null!==(M=null===(b=X.torso)||void 0===b?void 0:b.toFixed(0))&&void 0!==M?M:"—"]}),(0,n.jsxs)("li",{children:["Sym sh/k: ",null!==(T=null===(v=X.symShoulder)||void 0===v?void 0:v.toFixed(0))&&void 0!==T?T:"—"," / ",null!==(F=null===(g=X.symKnee)||void 0===g?void 0:g.toFixed(0))&&void 0!==F?F:"—"]}),(0,n.jsxs)("li",{children:["Avg vis: ",null!==(I=null==ee?void 0:ee.toFixed(2))&&void 0!==I?I:"—"]}),(0,n.jsxs)("li",{children:["BBox: ",Z?"".concat((100*Z[0]).toFixed(0),"\xd7").concat((100*Z[1]).toFixed(0)):"—"]}),(0,n.jsxs)("li",{className:"col-span-2 md:col-span-3",children:["Posture: ",es]})]})]}),(0,n.jsxs)("div",{className:"bg-panel rounded-lg p-4 border border-accent/20 md:col-span-3",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold mb-2 tracking-wide text-brandText/70",children:"Samples (debug)"}),(0,n.jsx)("div",{className:"text-[10px] font-mono space-y-1 max-h-40 overflow-auto pr-2 text-brandText/60",children:er.length?er.map((e,t)=>(0,n.jsx)("div",{children:e},t)):(0,n.jsx)("div",{className:"text-brandText/40",children:"—"})}),(0,n.jsx)("p",{className:"mt-3 text-[10px] text-brandText/40",children:"Processing happens locally in your browser."})]})]})]})})})})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=104)}),_N_E=e.O()}]);